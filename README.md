# Vite Plugin: CssInjectedByJs
A Vite plugin that takes the CSS and injects it via JS using CSSStyleSheet.insertRule()

## How does it work
Essentially what it does is take all the CSS generated by the build process and add it via JavaScript.
The CSS file is therefore not generated and the declaration in the generated HTML file is also removed.
You can also configure when the CSS injection will be executed (before or after your app code).

## Installation
```
npm i vite-inject-css --save-dev
```

```
yarn add -D vite-inject-css
```


## Usage
```ts
import injectCSS from 'vite-inject-css'

export default {
  plugins: [
    injectCSS(),
  ]
}
```
### Configurations
When you add the plugin, you can provide a configuration object.
For now, you can configure only when the injection of CSS is done at execution time ```topExecutionPriority```.
#### topExecutionPriority
The default behavior adds the injection of CSS before your bundle code.
If you provide ```topExecutionPriority``` equal to: ```false```  the code of injection will be added after the bundle code.
This is an example:
```ts
import injectCSS from 'vite-inject-css'

export default {
  plugins: [
    injectCSS({topExecutionPriority: false}),
  ]
}
```

#### styleId
If you provide a `string` for `styleId` param the code of injection will set the `id` attribute of the `style` element with the value of the parameter provided.
This is an example:
```ts
import injectCSS from 'vite-inject-css'

export default {
  plugins: [
    injectCSS({styleId: "foo"}),
  ]
}
```
The output injected into the DOM will look like this example:
```html
<head>
    <style id="foo">/* Generated CSS rules */</style>
</head>
```

## Contributing
When you make changes to plugin locally, you may want to build the js from the typescript file of the plugin. 
Here the guidelines:
### Install
```
yarn
```
### Build plugin
```
yarn build
```

See CONTRIBUTING.md for more information.
